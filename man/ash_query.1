.\"
.\"Copyright 2011 Carl Anderson
.\"
.\"Licensed under the Apache License, Version 2.0 (the "License");
.\"you may not use this file except in compliance with the License.
.\"You may obtain a copy of the License at
.\"
.\"    http://www.apache.org/licenses/LICENSE-2.0
.\"
.\"Unless required by applicable law or agreed to in writing, software
.\"distributed under the License is distributed on an "AS IS" BASIS,
.\"WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
.\"See the License for the specific language governing permissions and
.\"limitations under the License.
.\"

.TH ash_query 1 \
  "Updated: __DATE__" \
  "__VERSION__" \
  "Advanced Shell History"


.SH NAME
ash_query - The advanced shell history query manager.


.SH SYNOPSIS
Usage: ash_query [options]
      --help
  -d  --database VALUE
  -f  --format VALUE
  -p  --print_query VALUE
  -q  --query VALUE
  -F  --list_formats
  -H  --hide_headings
  -Q  --list_queries
      --version


.SH DESCRIPTION
TODO(cpa): Write a description of ash_query


.SH OPTIONS
.IP "      --help"

Display help and exit 0.

.IP "  -d  --database VALUE"

The filename of the database to query.  Typically this will be ~/.ash/history.db

.IP "  -f  --format VALUE"

Select an output format (VALUE) from:

.B aligned
  Columns are aligned and separated with spaces.      

.B csv
  Columns are comma separated with strings quoted.    

.B group
  Repeated values are summarized before the rows.     

.B null
  Columns are null separated with strings quoted. 

.IP "  -p  --print_query VALUE"

Print the query to stdout.  If the query uses shell variables, the generic query will be printed in addition to the query after variable substitution.

.IP "  -q  --query VALUE"

Execute the named query (VALUE) and display results formatted according to the specified --format.

.IP "  -F  --list_formats"

List the available output formats.

.IP "  -H  --hide_headings"

Suppress the headings of output tables (sometimes useful for scripting).

.IP "  -Q  --list_queries"

List the names and descriptions of all available saved queries taken from /etc/ash/queries and ~/.ash/queries.

.IP "      --version"

Display the version number and exit.


.SH FILES
.I /etc/ash/ash.conf
.RS
Contains environment variables to be sourced into your shell.
.RE

.I /etc/ash/queries
.RS
Contains saved queries which can be invoked using the
.BR ash_query(1)
command.  Also see
.I ~/.ash/queries
for user-written queries.
.RE

.I ~/.ash/history.db
.RS
The default location for the sqlite3 database holding command history.  See
http://code.google.com/p/advanced-shell-history/w for more details on how
the data is stored internally and other tips for querying the data.
.RE

.I /usr/local/advanced_shell_history/bash
.RS
Sourced for bash sessions.
.RE

.I /usr/local/advanced_shell_history/zsh
.RS
Sourced for zsh sessions.
.RE


.SH ENVIRONMENT
TODO(cpa): List the required environment variables for this program


.SH "SEE ALSO"
.BR ash_log(1)
for logging history


.SH AUTHOR
Carl Anderson, Google Inc.


.SH BUGS
Report bugs at http://code.google.com/p/advanced-shell-history/issues
